<div class="overlay d-flex justify-content-center align-items-center">
  <form
    [formGroup]="pinForm"
    (ngSubmit)="onSubmit()"
    class="w-100 p-4 m-4 border rounded bg-white shadow add-pin-form"
  >
    <h3>Add Pin</h3>

    <!-- Title -->
    <div class="form-group">
      <label for="title">Title*</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="form-control"
        placeholder="Enter Title"
        autocomplete="off"
      />
      <div
        *ngIf="pinForm.get('title')?.invalid && pinForm.get('title')?.touched"
        class="text-danger"
      >
        Title is required.
      </div>
    </div>

    <!-- Image (Drag and Drop) -->
    <div class="form-group">
      <label for="image">Image*</label>
      <div
        ng2FileDrop
        [uploader]="uploader"
        class="file-drop-zone drag-drop-area"
      >
        <input
          type="file"
          ng2FileSelect
          [uploader]="uploader"
          formControlName="image"
          accept="image/*"
          class="form-control-file"
        />
        <p>Drag and drop image here, or click to select one</p>
      </div>

      <!-- Display error if the image field is invalid -->
      <div
        *ngIf="!selectedFile && pinForm.get('image')?.touched"
        class="text-danger"
      >
        Image is required.
      </div>

      <!-- Display the uploaded image -->
      <div *ngIf="imageDataUrl" class="mt-3">
        <img
          [src]="imageDataUrl"
          alt="Uploaded Image"
          style="width: 100px; height: auto"
        />
      </div>
    </div>

    <!-- Collaborators (Multi-Select) -->
    <div class="form-group">
      <label for="collaborators">Collaborators*</label>
      <ngx-select
        [items]="collaboratorsList"
        formControlName="collaborators"
        [multiple]="true"
        [optionValueField]="'name'"
        [optionTextField]="'name'"
        [placeholder]="'Select collaborators'"
      ></ngx-select>
      <div
        *ngIf="
          pinForm.get('collaborators')?.invalid &&
          pinForm.get('collaborators')?.touched
        "
        class="text-danger"
      >
        Please select at least one collaborator.
      </div>
    </div>

    <!-- Privacy (Radio) -->
    <div class="form-group">
      <label>Privacy*</label>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          formControlName="privacy"
          value="Public"
          id="public"
        />
        <label class="form-check-label" for="public">Public</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          formControlName="privacy"
          value="Private"
          id="private"
        />
        <label class="form-check-label" for="private">Private</label>
      </div>
      <div
        *ngIf="
          pinForm.get('privacy')?.invalid && pinForm.get('privacy')?.touched
        "
        class="text-danger"
      >
        Privacy setting is required.
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-danger ml-1 mb-1" (click)="cancel()">
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary ml-1 mb-1"
        [disabled]="pinForm.invalid || !selectedFile"
      >
        Save
      </button>
    </div>
  </form>
</div>
